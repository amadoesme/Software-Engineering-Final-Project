{% extends "base.html" %}

{% block title %}My Favorite Books{% endblock %}

{% block content %}
<div class="page-header">
    <h1>My Favorite Books</h1>
    <p class="page-subtitle">All the books you’ve marked with a heart.</p>
</div>

{% if favorites %}
    <div class="book-grid">
        {% for fav in favorites %}
            {% with book=fav.book %}
            <div class="book-card">
                <a href="{% url 'book_detail' book.id %}" class="book-card-link">
                    <div class="book-card-header">
                        <h2 class="book-card-title">{{ book.title }}</h2>
                        <span class="book-card-author">{{ book.author }}</span>
                    </div>
                    <p class="book-card-meta">
                        {{ book.genre }} · {{ book.year }}
                    </p>
                </a>

                <form method="post"
                      action="{% url 'toggle_favorite' book.id %}"
                      class="favorite-form-inline">
                    {% csrf_token %}
                    <button type="submit"
                            class="favorite-btn is-favorite"
                            title="Remove from favorites">
                        &#10084;
                    </button>
                    <input type="hidden" name="next" value="{% url 'favorites_list' %}">
                </form>
            </div>
            {% endwith %}
        {% endfor %}
    </div>
{% else %}
    <p>You don’t have any favorites yet. Go browse books and tap the heart to add some!</p>
{% endif %}
{% endblock %}
