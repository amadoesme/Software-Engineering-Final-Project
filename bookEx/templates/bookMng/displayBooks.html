{% extends "base.html" %}

{% block title %}Browse Books{% endblock %}

{% block content %}
<h1 class="page-title">Browse Books</h1>

<form method="get" action="{% url 'displaybooks' %}" class="search-bar">
    <input
        type="text"
        name="q"
        class="form-control"
        placeholder="Search by title, author, or ISBN"
        value="{{ request.GET.q }}">
    <button type="submit" class="btn-primary">Search</button>
</form>

{% if books %}
    <div class="book-grid">
        {% for book in books %}
            <div class="book-card">
                {% if book.image %}
                    <img src="{{ book.image.url }}" alt="{{ book.title }}">
                {% endif %}

                <div class="book-title">{{ book.title }}</div>
                <div class="book-author">{{ book.author }}</div>
                <div class="book-meta">
                    {{ book.genre }}{% if book.year %} Â· {{ book.year }}{% endif %}
                </div>

                <div class="card-buttons">
                    <a href="{% url 'book_detail' book.id %}" class="btn-secondary">Details</a>

                    <form method="post" action="{% url 'add_to_cart' book.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn-accent">Add to Cart</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No books found.</p>
{% endif %}
{% endblock %}
